@page "/"
@inject SerOHRDb serOHRDb
@using Microsoft.AspNetCore.Components.Web
@* This library is for Lists *@
@using System.Collections.Generic


<h3>Find Generator(s)</h3>

@* Make upper case immediately.  Cannot Bind with Value Changed
<TelerikTextBox @ref="@TxtFirstChars" 
                Value="@strFirstChars"
                ValueChanged="SetUpperValueChanged"
                Placeholder="Enter First Characters of Generator Name"
                MaxLength="20" Width="20ch">
</TelerikTextBox> *@

@* <input type="text" @bind="@strFirstChars" @onkeyup="EnterTabFetchFirstChars" MaxLength="20" Width="20ch  /> *@

@* Make upper after exit. *@
<span @onkeyup="EnterTabFetchFirstChars">
<TelerikTextBox @ref="@TxtFirstChars"
                @bind-Value="@strFirstChars"
                OnChange="SetUpperOnChange"
                Placeholder="Enter First Characters of Generator Name"
                MaxLength="20" Width="20ch">
</TelerikTextBox>
</span>

<TelerikButton OnClick="FetchGenerators">
    Get Generators
</TelerikButton>

<TelerikButton Icon="@FontIcon.Cancel" Enabled="@(!string.IsNullOrEmpty(strFirstChars))" 
    OnClick="DeleteFirstChars">
</TelerikButton>


<br />
<br />

@if (lstGenerators != null)
{   
    <TelerikGrid Data="@lstGenerators"
                 Pageable="true"
                 Sortable="true"
                 FilterMode="GridFilterMode.FilterMenu"
                 Resizable="true"
                 Reorderable="true">
        <GridColumns>
            <GridColumn Field="@nameof(ModtblGenerator.GenNum)" Title="Gen Number" />
            <GridColumn Field="@nameof(ModtblGenerator.GenName)" Title="Generator Name" />
            <GridColumn Field="@nameof(ModtblGenerator.Street)" Title="Street" />
            <GridColumn Field="@nameof(ModtblGenerator.City)" Title="City" />
            <GridColumn Field="@nameof(ModtblGenerator.Province)" Title="Province" />
            <GridColumn Field="@nameof(ModtblGenerator.Country)" Title="Country" />
            <GridColumn Field="@nameof(ModtblGenerator.PostalCode)" Title="Postal Code" />
            <GridColumn Field="@nameof(ModtblGenerator.WasteClasses)" Title="Waste Classes" />
        </GridColumns>
    </TelerikGrid>
}
else if (blnFetching)
{
    <p>Loading...</p>
}
else if (blnError)
{
    <p>Error fetching Generators. Please try again.</p>
}


